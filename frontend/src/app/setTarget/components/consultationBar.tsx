'use client';

import React, { useState } from 'react';
import { useRouter } from 'next/navigation'; // 修正点

const ConsulationBar: React.FC = () => {
  const [inputValue, setInputValue] = useState('');
  const router = useRouter();

  // 入力が変更されたときに呼び出される関数
  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {
    setInputValue(event.target.value);
  };

  // SVGがクリックされたときに呼び出される関数
  const handleSendClick = async () => {
    console.log('Input Value:', inputValue);
    // ここでinputValueを使って他の処理を実行できます
    try {
      const response = await fetch("http://localhost:8080/obj/add", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ // 送信するデータをここで設定
          user_id: 1,
          obj_title: inputValue,
        }),
      });

      if (response.ok) {
        const data = await response.json();
        console.log("Response from server:", data);
        // router.push('/home');
      } else {
        console.error("Failed to send data:", response.statusText);
      }
    } catch (error) {
      console.error("Error:", error);
    }
  };

  return (
    <div className="flex items-center bg-white rounded-3xl shadow-md w-full max-w-6xl p-2 border border-gray-300">
      <input
        type="text"
        placeholder="修正してほしいことを書く"
        className="flex-grow px-4 py-2 text-gray-400 text-base focus:outline-none font-bold"
        value={inputValue}
        onChange={handleInputChange}
      />
    <svg width="175" height="54" viewBox="0 0 175 54" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="0.663818" y="0.332031" width="174.336" height="53.3363" rx="16" fill="#02F7C8"/>
      <path d="M29.7278 16.076L32.3438 16.868C31.8398 18.356 31.2398 19.916 30.5678 21.404V38.396H27.8558V26.396C27.3758 27.116 26.8718 27.812 26.3438 28.412C26.1038 27.74 25.4318 26.084 24.9758 25.34C26.8958 23.084 28.6718 19.58 29.7278 16.076ZM34.3838 22.7V26.036C36.0878 25.604 37.6238 25.028 38.9678 24.26C38.2958 23.66 37.6958 23.036 37.1918 22.412C36.7598 22.94 36.2798 23.42 35.7998 23.852C35.4878 23.54 34.9118 23.084 34.3838 22.7ZM42.8078 20.708H38.5838C39.1838 21.476 39.9518 22.244 40.8878 22.916C41.6558 22.268 42.2798 21.548 42.8078 20.708ZM47.5838 20.708H45.7838C45.0878 22.076 44.1758 23.228 43.1198 24.236C44.6078 24.956 46.3598 25.532 48.3518 25.844C47.8478 26.372 47.1518 27.452 46.8158 28.124C44.6078 27.644 42.6878 26.828 41.1038 25.844C39.4958 26.9 37.6478 27.716 35.6318 28.316C35.4158 27.884 34.8638 27.14 34.3838 26.588V34.412H31.9118V19.052H34.3838V21.596C35.9438 20.132 37.2398 18.092 37.9838 16.004L40.5518 16.604C40.3358 17.204 40.0718 17.828 39.7838 18.404H47.5838V20.708ZM43.5758 29.204L45.6158 30.044C43.7198 32.108 40.5278 33.548 37.2638 34.388C36.9518 33.86 36.3758 33.068 35.8718 32.612C38.8718 31.988 41.9918 30.788 43.5758 29.204ZM41.2238 27.02L43.3118 27.884C41.8238 29.396 39.4478 30.524 37.2158 31.244C36.8798 30.716 36.2558 30.044 35.7038 29.612C37.7438 29.084 40.0478 28.1 41.2238 27.02ZM45.3038 31.916L47.7518 32.9C45.2558 35.828 41.0078 37.436 36.1118 38.324C35.7998 37.628 35.2238 36.692 34.6718 36.068C39.0878 35.468 43.2398 34.172 45.3038 31.916ZM62.9198 34.724H71.5838V37.532H49.7678V34.724H52.7198V24.068H55.7198V34.724H59.8718V20.348H50.6078V17.564H70.9358V20.348H62.9198V25.628H69.6878V28.412H62.9198V34.724ZM88.3358 16.988C88.2878 17.372 88.1918 18.668 88.1678 19.052C88.1678 19.244 88.1678 19.508 88.1438 19.796C90.5678 19.796 93.8558 19.748 95.1038 19.772L95.0798 22.604C93.6398 22.532 91.4078 22.484 88.1438 22.484C88.1438 23.708 88.1678 25.028 88.1678 26.084C88.7438 26.996 89.0318 28.124 89.0318 29.372C89.0318 32.492 87.2078 36.476 81.3518 38.108L78.7838 35.564C81.2078 35.06 83.3198 34.268 84.6398 32.828C84.3038 32.9 83.9438 32.948 83.5598 32.948C81.7118 32.948 79.4318 31.46 79.4318 28.532C79.4318 25.82 81.6158 24.044 84.2318 24.044C84.5678 24.044 84.8798 24.068 85.1918 24.116C85.1918 23.588 85.1918 23.036 85.1678 22.508C81.5438 22.556 77.7998 22.7 74.8478 22.868L74.7758 19.964C77.5118 19.964 81.8798 19.868 85.1438 19.82C85.1198 19.508 85.1198 19.268 85.0958 19.076C85.0238 18.092 84.9278 17.276 84.8558 16.988H88.3358ZM82.3118 28.484C82.3118 29.588 83.1998 30.284 84.1598 30.284C85.1678 30.284 86.0558 29.516 85.7198 27.404C85.3838 26.852 84.8078 26.564 84.1598 26.564C83.2238 26.564 82.3118 27.212 82.3118 28.484ZM106.024 33.5C106.024 34.388 107.008 34.988 108.448 34.988C108.952 34.988 109.408 34.964 109.84 34.916C109.696 33.356 108.808 32.348 107.512 32.348C106.6 32.348 106.024 32.9 106.024 33.5ZM101.944 18.044C102.616 18.14 103.456 18.164 104.128 18.164C105.4 18.164 110.536 18.068 111.904 17.948C112.888 17.852 113.44 17.78 113.728 17.684L115.288 19.82C114.736 20.18 114.16 20.516 113.608 20.924C112.312 21.836 109.792 23.948 108.28 25.148C109.072 24.956 109.792 24.884 110.56 24.884C114.64 24.884 117.736 27.428 117.736 30.932C117.736 34.724 114.856 37.724 109.048 37.724C105.712 37.724 103.192 36.188 103.192 33.788C103.192 31.844 104.944 30.044 107.488 30.044C110.464 30.044 112.264 31.868 112.6 34.148C113.92 33.452 114.592 32.348 114.592 30.884C114.592 28.724 112.432 27.26 109.6 27.26C105.928 27.26 103.528 29.204 100.96 32.132L98.7758 29.876C100.48 28.508 103.384 26.06 104.8 24.884C106.144 23.78 108.64 21.764 109.816 20.732C108.592 20.756 105.28 20.9 104.008 20.972C103.36 21.02 102.592 21.092 102.04 21.164L101.944 18.044Z" fill="#585D72"/>
      <path d="M141.916 39.2865C141.962 39.4017 142.043 39.5 142.146 39.5682C142.25 39.6364 142.372 39.6713 142.496 39.6681C142.62 39.6649 142.74 39.6238 142.84 39.5504C142.941 39.477 143.016 39.3747 143.056 39.2573L150.964 16.1405C151.003 16.0327 151.011 15.916 150.986 15.8042C150.961 15.6923 150.905 15.5898 150.824 15.5088C150.743 15.4277 150.64 15.3714 150.528 15.3465C150.416 15.3216 150.3 15.329 150.192 15.3679L127.075 23.2763C126.958 23.3166 126.855 23.3918 126.782 23.4919C126.709 23.5919 126.667 23.7121 126.664 23.8362C126.661 23.9602 126.696 24.0823 126.764 24.186C126.832 24.2897 126.931 24.3701 127.046 24.4163L136.694 28.2853C136.999 28.4074 137.276 28.5901 137.509 28.8222C137.741 29.0543 137.924 29.3311 138.047 29.6358L141.916 39.2865Z" stroke="#585D72" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M150.82 15.5142L137.509 28.8233" stroke="#585D72" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>

    </div>
  );
};

export default ConsulationBar;
